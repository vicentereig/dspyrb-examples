---
http_interactions:
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"pr_batch\": {\n      \"type\": \"array\",\n      \"items\":
        {\n        \"type\": \"object\",\n        \"properties\": {\n          \"_type\":
        {\n            \"type\": \"string\",\n            \"const\": \"PullRequest\"\n          },\n          \"pr\":
        {\n            \"type\": \"integer\"\n          },\n          \"title\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": {\n            \"type\":
        \"string\"\n          },\n          \"ellipsis_summary\": {\n            \"type\":
        \"string\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"pr\",\n          \"title\",\n          \"description\",\n          \"ellipsis_summary\"\n        ],\n        \"description\":
        \"ChangelogGenerator::PullRequest struct\"\n      },\n      \"description\":
        \"Batch of pull requests to analyze together\"\n    }\n  },\n  \"required\":
        [\n    \"pr_batch\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"theme_names\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\":
        \"string\"\n      },\n      \"description\": \"Names of themes discovered
        from the PR batch\"\n    },\n    \"theme_descriptions\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Descriptions for each theme\"\n    },\n    \"theme_pr_ids\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"array\",\n        \"items\":
        {\n          \"type\": \"integer\"\n        }\n      },\n      \"description\":
        \"PR IDs belonging to each theme\"\n    },\n    \"pr_ids_list\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"integer\"\n      },\n      \"description\":
        \"List of PR IDs in order\"\n    },\n    \"pr_theme_assignments\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Theme names for each PR ID (parallel to pr_ids_list)\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"theme_names\",\n    \"theme_descriptions\",\n    \"theme_pr_ids\",\n    \"pr_ids_list\",\n    \"pr_theme_assignments\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Analyze a batch of pull requests to identify themes and relationships.
        Think step by step."},{"role":"user","content":"## Input Values\n```json\n{\n  \"pr_batch\":
        [\n    {\n      \"pr\": 3170,\n      \"title\": \"Add PostgreSQL metrics dashboard\",\n      \"description\":
        \"Implements built-in metrics for CPU, memory, and disk usage tracking\",\n      \"ellipsis_summary\":
        \"Added comprehensive metrics dashboard for PostgreSQL instances\"\n    },\n    {\n      \"pr\":
        3202,\n      \"title\": \"Enhance metrics API endpoints\",\n      \"description\":
        \"Adds new API endpoints for retrieving PostgreSQL performance metrics\",\n      \"ellipsis_summary\":
        \"Extended metrics API with additional endpoints\"\n    }\n  ]\n}\n```\n\nRespond
        with the corresponding output schema fields wrapped in a ```json ``` block,\nstarting
        with the heading `## Output values`."}],"temperature":0.0,"response_format":{"type":"json_schema","json_schema":{"name":"dspy_output_1753384390","strict":true,"schema":{"type":"object","properties":{"theme_names":{"type":"array","items":{"type":"string"},"description":"Names
        of themes discovered from the PR batch"},"theme_descriptions":{"type":"array","items":{"type":"string"},"description":"Descriptions
        for each theme"},"theme_pr_ids":{"type":"array","items":{"type":"array","items":{"type":"integer"}},"description":"PR
        IDs belonging to each theme"},"pr_ids_list":{"type":"array","items":{"type":"integer"},"description":"List
        of PR IDs in order"},"pr_theme_assignments":{"type":"array","items":{"type":"string"},"description":"Theme
        names for each PR ID (parallel to pr_ids_list)"},"reasoning":{"type":"string","description":"Step
        by step reasoning process"}},"required":["theme_names","theme_descriptions","theme_pr_ids","pr_ids_list","pr_theme_assignments","reasoning"],"additionalProperties":false}}}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Ruby
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - x64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - Linux
      X-Stainless-Package-Version:
      - 0.13.1
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.8
      Content-Type:
      - application/json
      Authorization:
      - Bearer <REDACTED>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '4760'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 24 Jul 2025 19:13:36 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-ftp1nrq85er9xnlu0la8snte
      Openai-Processing-Ms:
      - '2582'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '2594'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9998'
      X-Ratelimit-Remaining-Tokens:
      - '199166'
      X-Ratelimit-Reset-Requests:
      - 10.999s
      X-Ratelimit-Reset-Tokens:
      - 250ms
      X-Request-Id:
      - req_739d938b5de0703e6b507c097f0e0824
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=buv6b3rA0B3v5AlkKWC2KrSVj7bPK3dHfgmgzRNbQYQ-1753384416-1.0.1.1-4EwaOqy8dgO6y5WTHtfLNXFVmldWaEeip0Z7WrdgrJmLkCgTsTeUrYwX6Nfc3jbUsGtfsaL0Iui0ZbWpzqljIJOeuWBH.IgI376CWEBr5Dk;
        path=/; expires=Thu, 24-Jul-25 19:43:36 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=rZ2Us_GR09SozQ1cZCdDLlhcOIIoscXH4kr1_YTRjdw-1753384416870-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9645bc4cb94e4326-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-Bwvfi1ubyutNf8XKKKU15hul5AiCw",
          "object": "chat.completion",
          "created": 1753384414,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"theme_names\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"theme_descriptions\":[\"Improvements related to monitoring PostgreSQL performance metrics through a dashboard.\",\"Enhancements to the API for better access to performance metrics.\"],\"theme_pr_ids\":[[3170],[3202]],\"pr_ids_list\":[3170,3202],\"pr_theme_assignments\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"reasoning\":\"The first PR focuses on creating a metrics dashboard specifically for PostgreSQL, which falls under the theme of PostgreSQL Metrics. The second PR enhances the API to provide additional endpoints for retrieving performance metrics, which aligns with the theme of API Enhancements. Each PR is assigned to its respective theme based on its title and description.\"}",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 999,
            "completion_tokens": 149,
            "total_tokens": 1148,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": null
        }
  recorded_at: Thu, 24 Jul 2025 19:13:36 GMT
- request:
    method: post
    uri: https://api.anthropic.com/v1/messages
    body:
      encoding: UTF-8
      string: '{"model":"claude-3-5-haiku-latest","messages":[{"role":"user","content":"##
        Input Values\n```json\n{\n  \"pr_batch\": [\n    {\n      \"pr\": 3170,\n      \"title\":
        \"Add PostgreSQL metrics dashboard\",\n      \"description\": \"Implements
        built-in metrics for CPU, memory, and disk usage tracking\",\n      \"ellipsis_summary\":
        \"Added comprehensive metrics dashboard for PostgreSQL instances\"\n    },\n    {\n      \"pr\":
        3202,\n      \"title\": \"Enhance metrics API endpoints\",\n      \"description\":
        \"Adds new API endpoints for retrieving PostgreSQL performance metrics\",\n      \"ellipsis_summary\":
        \"Extended metrics API with additional endpoints\"\n    }\n  ]\n}\n```\n\nRespond
        with the corresponding output schema fields wrapped in a ```json ``` block,\nstarting
        with the heading `## Output values`.\n\nIMPORTANT: Respond with ONLY valid
        JSON. No markdown formatting, no code blocks, no explanations. Start your
        response with ''{'' and end with ''}''."}],"max_tokens":4096,"temperature":0.0,"system":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"pr_batch\": {\n      \"type\": \"array\",\n      \"items\":
        {\n        \"type\": \"object\",\n        \"properties\": {\n          \"_type\":
        {\n            \"type\": \"string\",\n            \"const\": \"PullRequest\"\n          },\n          \"pr\":
        {\n            \"type\": \"integer\"\n          },\n          \"title\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": {\n            \"type\":
        \"string\"\n          },\n          \"ellipsis_summary\": {\n            \"type\":
        \"string\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"pr\",\n          \"title\",\n          \"description\",\n          \"ellipsis_summary\"\n        ],\n        \"description\":
        \"ChangelogGenerator::PullRequest struct\"\n      },\n      \"description\":
        \"Batch of pull requests to analyze together\"\n    }\n  },\n  \"required\":
        [\n    \"pr_batch\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"theme_names\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\":
        \"string\"\n      },\n      \"description\": \"Names of themes discovered
        from the PR batch\"\n    },\n    \"theme_descriptions\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Descriptions for each theme\"\n    },\n    \"theme_pr_ids\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"array\",\n        \"items\":
        {\n          \"type\": \"integer\"\n        }\n      },\n      \"description\":
        \"PR IDs belonging to each theme\"\n    },\n    \"pr_ids_list\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"integer\"\n      },\n      \"description\":
        \"List of PR IDs in order\"\n    },\n    \"pr_theme_assignments\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Theme names for each PR ID (parallel to pr_ids_list)\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"theme_names\",\n    \"theme_descriptions\",\n    \"theme_pr_ids\",\n    \"pr_ids_list\",\n    \"pr_theme_assignments\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Analyze a batch of pull requests to identify themes and relationships.
        Think step by step."}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Ruby
      Host:
      - api.anthropic.com
      X-Stainless-Arch:
      - x64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - Linux
      X-Stainless-Package-Version:
      - 1.1.1
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.8
      Content-Type:
      - application/json
      Anthropic-Version:
      - '2023-06-01'
      X-Api-Key:
      - "<ANTHROPIC_API_KEY>"
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '3966'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 24 Jul 2025 19:13:40 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Anthropic-Ratelimit-Input-Tokens-Limit:
      - '100000'
      Anthropic-Ratelimit-Input-Tokens-Remaining:
      - '100000'
      Anthropic-Ratelimit-Input-Tokens-Reset:
      - '2025-07-24T19:13:37Z'
      Anthropic-Ratelimit-Output-Tokens-Limit:
      - '20000'
      Anthropic-Ratelimit-Output-Tokens-Remaining:
      - '20000'
      Anthropic-Ratelimit-Output-Tokens-Reset:
      - '2025-07-24T19:13:40Z'
      Anthropic-Ratelimit-Requests-Limit:
      - '1000'
      Anthropic-Ratelimit-Requests-Remaining:
      - '999'
      Anthropic-Ratelimit-Requests-Reset:
      - '2025-07-24T19:13:37Z'
      Anthropic-Ratelimit-Tokens-Limit:
      - '120000'
      Anthropic-Ratelimit-Tokens-Remaining:
      - '120000'
      Anthropic-Ratelimit-Tokens-Reset:
      - '2025-07-24T19:13:37Z'
      Request-Id:
      - req_011CRSNo1KTkNaLspxv68sMu
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Anthropic-Organization-Id:
      - '008b8384-4ae5-436d-a319-c5a07111a158'
      Via:
      - 1.1 google
      Cf-Cache-Status:
      - DYNAMIC
      X-Robots-Tag:
      - none
      Server:
      - cloudflare
      Cf-Ray:
      - 9645bc5e2a0214ed-EWR
    body:
      encoding: ASCII-8BIT
      string: '{"id":"msg_011LcnUUnR2gUAkyVKFoK5gx","type":"message","role":"assistant","model":"claude-3-5-haiku-20241022","content":[{"type":"text","text":"##
        Output values\n```json\n{\n    \"theme_names\": [\"PostgreSQL Metrics Monitoring\"],\n    \"theme_descriptions\":
        [\"Comprehensive metrics and monitoring capabilities for PostgreSQL instances\"],\n    \"theme_pr_ids\":
        [[3170, 3202]],\n    \"pr_ids_list\": [3170, 3202],\n    \"pr_theme_assignments\":
        [\"PostgreSQL Metrics Monitoring\", \"PostgreSQL Metrics Monitoring\"],\n    \"reasoning\":
        \"Both PRs focus on PostgreSQL metrics: PR 3170 adds a metrics dashboard,
        while PR 3202 enhances metrics API endpoints. These are closely related improvements
        to PostgreSQL monitoring infrastructure, forming a cohesive theme of metrics
        monitoring.\"\n}\n```"}],"stop_reason":"end_turn","stop_sequence":null,"usage":{"input_tokens":1016,"cache_creation_input_tokens":0,"cache_read_input_tokens":0,"output_tokens":167,"service_tier":"standard"}}'
  recorded_at: Thu, 24 Jul 2025 19:13:40 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"pr_batch\": {\n      \"type\": \"array\",\n      \"items\":
        {\n        \"type\": \"object\",\n        \"properties\": {\n          \"_type\":
        {\n            \"type\": \"string\",\n            \"const\": \"PullRequest\"\n          },\n          \"pr\":
        {\n            \"type\": \"integer\"\n          },\n          \"title\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": {\n            \"type\":
        \"string\"\n          },\n          \"ellipsis_summary\": {\n            \"type\":
        \"string\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"pr\",\n          \"title\",\n          \"description\",\n          \"ellipsis_summary\"\n        ],\n        \"description\":
        \"ChangelogGenerator::PullRequest struct\"\n      },\n      \"description\":
        \"Batch of pull requests to analyze together\"\n    }\n  },\n  \"required\":
        [\n    \"pr_batch\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"theme_names\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\":
        \"string\"\n      },\n      \"description\": \"Names of themes discovered
        from the PR batch\"\n    },\n    \"theme_descriptions\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Descriptions for each theme\"\n    },\n    \"theme_pr_ids\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"array\",\n        \"items\":
        {\n          \"type\": \"integer\"\n        }\n      },\n      \"description\":
        \"PR IDs belonging to each theme\"\n    },\n    \"pr_ids_list\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"integer\"\n      },\n      \"description\":
        \"List of PR IDs in order\"\n    },\n    \"pr_theme_assignments\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Theme names for each PR ID (parallel to pr_ids_list)\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"theme_names\",\n    \"theme_descriptions\",\n    \"theme_pr_ids\",\n    \"pr_ids_list\",\n    \"pr_theme_assignments\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Analyze a batch of pull requests to identify themes and relationships.
        Think step by step."},{"role":"user","content":"## Input Values\n```json\n{\n  \"pr_batch\":
        [\n    {\n      \"pr\": 3170,\n      \"title\": \"Add PostgreSQL metrics dashboard\",\n      \"description\":
        \"Implements built-in metrics for CPU, memory, and disk usage tracking\",\n      \"ellipsis_summary\":
        \"Added comprehensive metrics dashboard for PostgreSQL instances\"\n    },\n    {\n      \"pr\":
        3202,\n      \"title\": \"Enhance metrics API endpoints\",\n      \"description\":
        \"Adds new API endpoints for retrieving PostgreSQL performance metrics\",\n      \"ellipsis_summary\":
        \"Extended metrics API with additional endpoints\"\n    }\n  ]\n}\n```\n\nRespond
        with the corresponding output schema fields wrapped in a ```json ``` block,\nstarting
        with the heading `## Output values`."}],"temperature":0.0,"response_format":{"type":"json_schema","json_schema":{"name":"dspy_output_1753384474","strict":true,"schema":{"type":"object","properties":{"theme_names":{"type":"array","items":{"type":"string"},"description":"Names
        of themes discovered from the PR batch"},"theme_descriptions":{"type":"array","items":{"type":"string"},"description":"Descriptions
        for each theme"},"theme_pr_ids":{"type":"array","items":{"type":"array","items":{"type":"integer"}},"description":"PR
        IDs belonging to each theme"},"pr_ids_list":{"type":"array","items":{"type":"integer"},"description":"List
        of PR IDs in order"},"pr_theme_assignments":{"type":"array","items":{"type":"string"},"description":"Theme
        names for each PR ID (parallel to pr_ids_list)"},"reasoning":{"type":"string","description":"Step
        by step reasoning process"}},"required":["theme_names","theme_descriptions","theme_pr_ids","pr_ids_list","pr_theme_assignments","reasoning"],"additionalProperties":false}}}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Ruby
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - x64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - Linux
      X-Stainless-Package-Version:
      - 0.13.1
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.8
      Content-Type:
      - application/json
      Authorization:
      - Bearer <REDACTED>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '4760'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 24 Jul 2025 19:14:39 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-ftp1nrq85er9xnlu0la8snte
      Openai-Processing-Ms:
      - '2765'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '2781'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9998'
      X-Ratelimit-Remaining-Tokens:
      - '199166'
      X-Ratelimit-Reset-Requests:
      - 15.337s
      X-Ratelimit-Reset-Tokens:
      - 250ms
      X-Request-Id:
      - req_c6940da70c8856ac6269a712e06e2e79
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=oQs1jgB8xQZfCGL6M9ADWDsUWFUQhQoEBljH0FfQupc-1753384479-1.0.1.1-Zw16l9U9emL8mmHWY0DvJ1BaGTzsKnQvutXcv1FVewpLUzb_pGxtcJSqeZ_qrqul5LeQ_proEbm5WXKmruiIFHDyFeM6aOHze0CjK6ffFMc;
        path=/; expires=Thu, 24-Jul-25 19:44:39 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=iYqp9Mqm5T5GyrYhyXsCi3xO4AEHLvjGHxgWEsSpSPo-1753384479883-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9645bdd4ccb9f3e6-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-BwvgjdafK6iTGbjDRcgCQGEnf7NG2",
          "object": "chat.completion",
          "created": 1753384477,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"theme_names\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"theme_descriptions\":[\"Improvements related to monitoring and metrics for PostgreSQL databases.\",\"Enhancements to the API for better performance metrics retrieval.\"],\"theme_pr_ids\":[[3170],[3202]],\"pr_ids_list\":[3170,3202],\"pr_theme_assignments\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"reasoning\":\"The first PR focuses on adding a metrics dashboard for PostgreSQL, which falls under the theme of PostgreSQL Metrics. The second PR enhances the API endpoints related to performance metrics, which is categorized under API Enhancements. Each PR is assigned to its respective theme based on the content of the title and description.\"}",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 999,
            "completion_tokens": 144,
            "total_tokens": 1143,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": null
        }
  recorded_at: Thu, 24 Jul 2025 19:14:39 GMT
- request:
    method: post
    uri: https://api.openai.com/v1/chat/completions
    body:
      encoding: UTF-8
      string: '{"model":"gpt-4o-mini","messages":[{"role":"system","content":"Your
        input schema fields are:\n```json\n{\n  \"$schema\": \"http://json-schema.org/draft-06/schema#\",\n  \"type\":
        \"object\",\n  \"properties\": {\n    \"pr_batch\": {\n      \"type\": \"array\",\n      \"items\":
        {\n        \"type\": \"object\",\n        \"properties\": {\n          \"_type\":
        {\n            \"type\": \"string\",\n            \"const\": \"PullRequest\"\n          },\n          \"pr\":
        {\n            \"type\": \"integer\"\n          },\n          \"title\": {\n            \"type\":
        \"string\"\n          },\n          \"description\": {\n            \"type\":
        \"string\"\n          },\n          \"ellipsis_summary\": {\n            \"type\":
        \"string\"\n          }\n        },\n        \"required\": [\n          \"_type\",\n          \"pr\",\n          \"title\",\n          \"description\",\n          \"ellipsis_summary\"\n        ],\n        \"description\":
        \"ChangelogGenerator::PullRequest struct\"\n      },\n      \"description\":
        \"Batch of pull requests to analyze together\"\n    }\n  },\n  \"required\":
        [\n    \"pr_batch\"\n  ]\n}\n```\nYour output schema fields are:\n```json\n{\n  \"$schema\":
        \"http://json-schema.org/draft-06/schema#\",\n  \"type\": \"object\",\n  \"properties\":
        {\n    \"theme_names\": {\n      \"type\": \"array\",\n      \"items\": {\n        \"type\":
        \"string\"\n      },\n      \"description\": \"Names of themes discovered
        from the PR batch\"\n    },\n    \"theme_descriptions\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Descriptions for each theme\"\n    },\n    \"theme_pr_ids\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"array\",\n        \"items\":
        {\n          \"type\": \"integer\"\n        }\n      },\n      \"description\":
        \"PR IDs belonging to each theme\"\n    },\n    \"pr_ids_list\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"integer\"\n      },\n      \"description\":
        \"List of PR IDs in order\"\n    },\n    \"pr_theme_assignments\": {\n      \"type\":
        \"array\",\n      \"items\": {\n        \"type\": \"string\"\n      },\n      \"description\":
        \"Theme names for each PR ID (parallel to pr_ids_list)\"\n    },\n    \"reasoning\":
        {\n      \"type\": \"string\",\n      \"description\": \"Step by step reasoning
        process\"\n    }\n  },\n  \"required\": [\n    \"theme_names\",\n    \"theme_descriptions\",\n    \"theme_pr_ids\",\n    \"pr_ids_list\",\n    \"pr_theme_assignments\",\n    \"reasoning\"\n  ]\n}\n```\n\nAll
        interactions will be structured in the following way, with the appropriate
        values filled in.\n## Input values\n```json\n{input_values}\n```\n## Output
        values\nRespond exclusively with the output schema fields in the json block
        below.\n```json\n{output_values}\n```\n\nIn adhering to this structure, your
        objective is: Analyze a batch of pull requests to identify themes and relationships.
        Think step by step."},{"role":"user","content":"## Input Values\n```json\n{\n  \"pr_batch\":
        [\n    {\n      \"pr\": 3170,\n      \"title\": \"Add PostgreSQL metrics dashboard\",\n      \"description\":
        \"Implements built-in metrics for CPU, memory, and disk usage tracking\",\n      \"ellipsis_summary\":
        \"Added comprehensive metrics dashboard for PostgreSQL instances\"\n    },\n    {\n      \"pr\":
        3202,\n      \"title\": \"Enhance metrics API endpoints\",\n      \"description\":
        \"Adds new API endpoints for retrieving PostgreSQL performance metrics\",\n      \"ellipsis_summary\":
        \"Extended metrics API with additional endpoints\"\n    }\n  ]\n}\n```\n\nRespond
        with the corresponding output schema fields wrapped in a ```json ``` block,\nstarting
        with the heading `## Output values`."}],"temperature":0.0,"response_format":{"type":"json_schema","json_schema":{"name":"dspy_output_1753384635","strict":true,"schema":{"type":"object","properties":{"theme_names":{"type":"array","items":{"type":"string"},"description":"Names
        of themes discovered from the PR batch"},"theme_descriptions":{"type":"array","items":{"type":"string"},"description":"Descriptions
        for each theme"},"theme_pr_ids":{"type":"array","items":{"type":"array","items":{"type":"integer"}},"description":"PR
        IDs belonging to each theme"},"pr_ids_list":{"type":"array","items":{"type":"integer"},"description":"List
        of PR IDs in order"},"pr_theme_assignments":{"type":"array","items":{"type":"string"},"description":"Theme
        names for each PR ID (parallel to pr_ids_list)"},"reasoning":{"type":"string","description":"Step
        by step reasoning process"}},"required":["theme_names","theme_descriptions","theme_pr_ids","pr_ids_list","pr_theme_assignments","reasoning"],"additionalProperties":false}}}}'
    headers:
      Accept-Encoding:
      - gzip;q=1.0,deflate;q=0.6,identity;q=0.3
      Accept:
      - application/json
      User-Agent:
      - Ruby
      Host:
      - api.openai.com
      X-Stainless-Arch:
      - x64
      X-Stainless-Lang:
      - ruby
      X-Stainless-Os:
      - Linux
      X-Stainless-Package-Version:
      - 0.13.1
      X-Stainless-Runtime:
      - ruby
      X-Stainless-Runtime-Version:
      - 3.3.8
      Content-Type:
      - application/json
      Authorization:
      - Bearer <REDACTED>
      X-Stainless-Retry-Count:
      - '0'
      X-Stainless-Timeout:
      - '600.0'
      Content-Length:
      - '4760'
  response:
    status:
      code: 200
      message: OK
    headers:
      Date:
      - Thu, 24 Jul 2025 19:17:27 GMT
      Content-Type:
      - application/json
      Transfer-Encoding:
      - chunked
      Connection:
      - keep-alive
      Access-Control-Expose-Headers:
      - X-Request-ID
      Openai-Organization:
      - user-ftp1nrq85er9xnlu0la8snte
      Openai-Processing-Ms:
      - '2512'
      Openai-Project:
      - proj_n52OL5vlzVaXGnYDaGWmVX5F
      Openai-Version:
      - '2020-10-01'
      X-Envoy-Upstream-Service-Time:
      - '2516'
      X-Ratelimit-Limit-Requests:
      - '10000'
      X-Ratelimit-Limit-Tokens:
      - '200000'
      X-Ratelimit-Remaining-Requests:
      - '9997'
      X-Ratelimit-Remaining-Tokens:
      - '199166'
      X-Ratelimit-Reset-Requests:
      - 25.107s
      X-Ratelimit-Reset-Tokens:
      - 250ms
      X-Request-Id:
      - bcdbe386-a41e-4ac3-bfa4-7e8b2ee8f62e
      Cf-Cache-Status:
      - DYNAMIC
      Set-Cookie:
      - __cf_bm=6oKaH5s9aBQ4w.rMqpJ3q5L28m50c1tDRcNZKAHyTxo-1753384647-1.0.1.1-Llk1U71LrrLzqk0PD4Kq8OcirMPdmS.gWPWnz27f9cosKVXybJr6qeGOzw5Q0bxFEUNI5_v9AwoSLMsUDVt4LOevn60S6xitbTPLG6jnulk;
        path=/; expires=Thu, 24-Jul-25 19:47:27 GMT; domain=.api.openai.com; HttpOnly;
        Secure; SameSite=None
      - _cfuvid=CGOLrx2Y0V.X0ftDX_ni.l7GnKrbUXLXs1Siaktl_xE-1753384647537-0.0.1.1-604800000;
        path=/; domain=.api.openai.com; HttpOnly; Secure; SameSite=None
      Strict-Transport-Security:
      - max-age=31536000; includeSubDomains; preload
      X-Content-Type-Options:
      - nosniff
      Server:
      - cloudflare
      Cf-Ray:
      - 9645c1eedc178c36-EWR
      Alt-Svc:
      - h3=":443"; ma=86400
    body:
      encoding: ASCII-8BIT
      string: |
        {
          "id": "chatcmpl-BwvjR7tcYnuSMPzWHiCztY0RIaU0N",
          "object": "chat.completion",
          "created": 1753384645,
          "model": "gpt-4o-mini-2024-07-18",
          "choices": [
            {
              "index": 0,
              "message": {
                "role": "assistant",
                "content": "{\"theme_names\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"theme_descriptions\":[\"Improvements related to monitoring and metrics for PostgreSQL databases.\",\"Enhancements to the API for better performance metrics retrieval.\"],\"theme_pr_ids\":[[3170],[3202]],\"pr_ids_list\":[3170,3202],\"pr_theme_assignments\":[\"PostgreSQL Metrics\",\"API Enhancements\"],\"reasoning\":\"The first PR focuses on adding a metrics dashboard for PostgreSQL, which falls under the theme of PostgreSQL Metrics. The second PR enhances the API endpoints for retrieving performance metrics, which aligns with the theme of API Enhancements. Each PR is assigned to its respective theme based on its title and description.\"}",
                "refusal": null,
                "annotations": []
              },
              "logprobs": null,
              "finish_reason": "stop"
            }
          ],
          "usage": {
            "prompt_tokens": 999,
            "completion_tokens": 143,
            "total_tokens": 1142,
            "prompt_tokens_details": {
              "cached_tokens": 0,
              "audio_tokens": 0
            },
            "completion_tokens_details": {
              "reasoning_tokens": 0,
              "audio_tokens": 0,
              "accepted_prediction_tokens": 0,
              "rejected_prediction_tokens": 0
            }
          },
          "service_tier": "default",
          "system_fingerprint": null
        }
  recorded_at: Thu, 24 Jul 2025 19:17:27 GMT
recorded_with: VCR 6.3.1
